<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <template id="external_layout">
            <div class="container">
                <div class="row header">
                    <div t-att-class="container">
                        <div class="row">
                            <div class="col-8">
                                <img t-if="company.logo"
                                     t-att-src="image_data_uri(company.logo)"
                                     style="height: 100px;width: 100px; "
                                     alt="Logo"/>
                            </div>
                            <div class="col-4">
                                parcode
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-6">
                                <strong>
                                    <span class="text-right arabic" style="padding-right:5px;"
                                          t-field="company.arabic_name"/></strong>
                                <br/>
                                <t t-if="company.street">
                                    <span class="text-right arabic" style="padding-right:5px;"
                                          t-field="company.arabic_street"/><br/>
                                </t>
                                <t t-if="company.street2">
                                    <span class="text-right arabic" style="padding-right:5px;"
                                          t-field="company.arabic_street2"/><br/>
                                </t>
                                <t t-if="company.city">
                                    <span class="text-right arabic" style="padding-right:5px;"
                                          t-field="company.arabic_city"/><br/>
                                </t>
                                <t t-if="company.arabic_country">
                                    <span class="text-right arabic" style="padding-right:5px;"
                                          t-field="company.arabic_country"/><br/>
                                </t>

                                <p width="100%">‫‪ <span class="text-right"
                                                         style="padding-left:5px;"/>CR
                                    No. : </p>
                                <p width="16%"><span class="text-center arabic"
                                                     t-field="company.company_registry"/>
                                    ‫‪</p>
                                <p width="17%"><span class="text-right arabic" style="padding-right:-6px;">
                                    رقم السجل
                                    التجاري</span>
                                    ‬</p>

                                <p width="2%" style="border-left:1pt solid black;"></p>

                                <p width="16%">‫‪ <span class="text-right" style="padding-left:5px;">VAT‬‬
                                    No.: </span></p>
                                <p width="16%"><span class="text-center arabic" t-field="company.vat"/>
                                    ‫‪</p>
                                <p width="17%"><span class="text-right arabic" style="padding-right:-6px;">
                                    ضريبة القيمة
                                    المضافة</span>‬</p>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-8">
                                ff
                                ew
                            </div>
                            <div class="col-4">
                                client
                            </div>
                        </div>

                    </div>
                </div>
                <div class="row article o_report_layout_standard">
                    <t t-raw="0"/>
                </div>
            </div>

        </template>

        <template id="my_template">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="doc">
                    <t t-call="saudi_einvoice_knk.external_layout">
                        <div class="page">
                            <t t-if="o and 'company_id' in o">
                                <t t-set="company" t-value="o.company_id"/>
                            </t>
                            <t t-if="not o or not 'company_id' in o">
                                <t t-set="company" t-value="res_company"/>
                            </t>

                            <!--                            <div class="header">-->
                            <!--                                <div t-att-class="container">-->
                            <!--                                    <div class="row">-->
                            <!--                                        <div class="col-8">-->
                            <!--                                            <img t-if="company.logo"-->
                            <!--                                                 t-att-src="image_data_uri(company.logo)"-->
                            <!--                                                 style="height: 100px;width: 100px; "-->
                            <!--                                                 alt="Logo"/>-->
                            <!--                                        </div>-->
                            <!--                                        <div class="col-4">-->
                            <!--                                            parcode-->
                            <!--                                        </div>-->
                            <!--                                    </div>-->

                            <!--                                    <div class="row">-->
                            <!--                                        <div class="col-6">-->
                            <!--                                            <strong>-->
                            <!--                                                <span class="text-right arabic" style="padding-right:5px;"-->
                            <!--                                                      t-field="company.arabic_name"/></strong>-->
                            <!--                                            <br/>-->
                            <!--                                            <t t-if="company.street">-->
                            <!--                                                <span class="text-right arabic" style="padding-right:5px;"-->
                            <!--                                                      t-field="company.arabic_street"/><br/>-->
                            <!--                                            </t>-->
                            <!--                                            <t t-if="company.street2">-->
                            <!--                                                <span class="text-right arabic" style="padding-right:5px;"-->
                            <!--                                                      t-field="company.arabic_street2"/><br/>-->
                            <!--                                            </t>-->
                            <!--                                            <t t-if="company.city">-->
                            <!--                                                <span class="text-right arabic" style="padding-right:5px;"-->
                            <!--                                                      t-field="company.arabic_city"/><br/>-->
                            <!--                                            </t>-->
                            <!--                                            <t t-if="company.arabic_country">-->
                            <!--                                                <span class="text-right arabic" style="padding-right:5px;"-->
                            <!--                                                      t-field="company.arabic_country"/><br/>-->
                            <!--                                            </t>-->

                            <!--                                            <p width="100%">‫‪ <span class="text-right"-->
                            <!--                                                                     style="padding-left:5px;"/>CR-->
                            <!--                                                No. : </p>-->
                            <!--                                            <p width="16%"><span class="text-center arabic"-->
                            <!--                                                                 t-field="company.company_registry"/>-->
                            <!--                                                ‫‪</p>-->
                            <!--                                            <p width="17%"><span class="text-right arabic" style="padding-right:-6px;">-->
                            <!--                                                رقم السجل-->
                            <!--                                                التجاري</span>-->
                            <!--                                                ‬</p>-->

                            <!--                                            <p width="2%" style="border-left:1pt solid black;"></p>-->

                            <!--                                            <p width="16%">‫‪ <span class="text-right" style="padding-left:5px;">VAT‬‬-->
                            <!--                                                No.: </span></p>-->
                            <!--                                            <p width="16%"><span class="text-center arabic" t-field="company.vat"/>-->
                            <!--                                                ‫‪</p>-->
                            <!--                                            <p width="17%"><span class="text-right arabic" style="padding-right:-6px;">-->
                            <!--                                                ضريبة القيمة-->
                            <!--                                                المضافة</span>‬</p>-->
                            <!--                                        </div>-->
                            <!--                                    </div>-->

                            <!--                                    <div class="row">-->
                            <!--                                        <div class="col-8">-->
                            <!--                                            ff-->
                            <!--                                            ew-->
                            <!--                                        </div>-->
                            <!--                                        <div class="col-4">-->
                            <!--                                            client-->
                            <!--                                        </div>-->
                            <!--                                    </div>-->

                            <!--                                </div>-->
                            <!--                            </div>-->

                            <t t-foreach="doc" t-as="o">
                                <div class="page" style="padding-top:40px;margin-top:-28pt;">
                                    <link rel="stylesheet" href="/saudi_einvoice_knk/static/src/css/style.css"/>
                                    <t t-set="company" t-value="res_company"/>
                                    <div class="font">
                                        <table style="border:1pt solid grey;width:100%;font-size:12px;margin-bottom: 20px;"
                                               width="100%">
                                            <tr>
                                                <td style="padding:4pt;font-weight: bold;text-align:center;background-color:#DCDCDC;"><span
                                                        class="text-right arabic">Simplified Tax Invoice / فاتورة ضريبية
                                                    مبسطة</span></td>
                                            </tr>
                                        </table>

                                        <div class="row mt32 mb32">
                                            <div class="col-9" style="color:black; ">
                                                <table style="border:1pt solid grey;width:100%;padding:10pt;color:black;"
                                                       class="table table-bordered table-sm">
                                                    <tr>
                                                        <td style="font-weight:bold; width:25%;">‫‪Invoice‬‬
                                                            ‫‪Number‬‬</td>
                                                        <td style="width:50%; text-align:center;"><span
                                                                t-field="o.name"/></td>
                                                        <td class="arabic" style="width:25%; text-align:right;">رقم
                                                            الفاتورة</td>
                                                    </tr>
                                                    <tr>
                                                        <td style="font-weight:bold; width:25%;">‫‪Invoice‬‬ Date</td>
                                                        <td style="width:50%; text-align:center;"><span
                                                                t-field="o.invoice_date"/></td>
                                                        <td class="arabic" style="width:25%; text-align:right;">تاريخ
                                                            الفاتورة</td>
                                                    </tr>
                                                    <tr>
                                                        <td style="font-weight:bold; width:25%;">‫‪Due Date</td>
                                                        <td style="width:50%; text-align:center;"></td>
                                                        <td class="arabic" style="width:25%; text-align:right;">تاريخ
                                                            الفاتورة</td>
                                                    </tr>
                                                    <tr>
                                                        <td style="font-weight:bold; width:25%;">‫‪Payment Terms‬</td>
                                                        <td style="width:50%; text-align:center;">
                                                            <span t-field="o.invoice_payment_term_id"/>
                                                        </td>
                                                        <td class="arabic" style="width:25%; text-align:right;">فترة
                                                            الخدمة</td>
                                                    </tr>
                                                </table>
                                                <br/>
                                            </div>
                                            <div class="col-3" style="margin-top: -10pt; padding-left:25pt;">
                                                <img t-if="doc.get_qr_code()"
                                                     style="display:block;"
                                                     t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s'%('QR', doc.get_qr_code(), 120, 120)"/>
                                            </div>
                                        </div>

                                        <table style="border:1pt solid grey;width:100%;color:black;"
                                               class="table-condensed">
                                            <thead>
                                                <tr style="background-color:#DCDCDC">
                                                    <td width="15%"
                                                        style="border:1pt solid grey;text-align:center;padding:2pt;">
                                                        Total<br/>(incl.vat) <br/><span class="arabic">المجموع
                                                        /</span></td>
                                                    <td width="15%"
                                                        style="border:1pt solid grey;text-align:center;padding:2pt;width:7%">
                                                        Qty<br/><span class="arabic"></span>الكمية /</td>
                                                    <td width="15%"
                                                        style="border:1pt solid grey;text-align:center;padding:2pt;">
                                                        U.P<br/><span class="arabic">س,و /</span></td>
                                                    <td width="35%"
                                                        style="border:1pt solid grey;text-align:center;padding:2pt;">
                                                        Description<br/><span class="arabic">الوصف /</span></td>
                                                    <td width="20%"
                                                        style="border:1pt solid grey;text-align:center;padding:2pt;">
                                                        Service<br/><span class="arabic">الخدمه /</span></td>
                                                </tr>
                                            </thead>
                                            <t t-set="tax_total" t-value="0"/>
                                            <tbody class="invoice_tbody">
                                                <tr t-foreach="o.invoice_line_ids" t-as="l">
                                                    <t t-set="line_tax_total" t-value="0"/>
                                                    <t t-foreach="l.tax_ids" t-as="t">
                                                        <t t-set="tax_total"
                                                           t-value="tax_total + l.price_subtotal* t.amount/100"/>
                                                        <t t-set="line_tax_total" t-value="line_tax_total + t.amount"/>
                                                    </t>
                                                    <td style="border-right:1pt solid grey;text-align:center;padding:3pt">
                                                        <span t-field="l.price_subtotal"
                                                              t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                                                    </td>
                                                    <td style="border-right:1pt solid grey;text-align:center;padding:3pt"><span
                                                            t-esc="'%.2f %s '%(l.quantity,l.product_uom_id.name)"/></td>
                                                    <td style="border-right:1pt solid grey;text-align:center;padding:3pt"><span
                                                            t-field="l.price_unit"
                                                            t-options='{"widget": "monetary", "display_currency": o.currency_id}'/></td>
                                                    <td style="border-right:1pt solid grey;text-align:center;padding:3pt">
                                                        <span t-field="l.name"/> -
                                                        <span class="text-right arabic"
                                                              t-esc="l.product_id.id"/>
                                                        <br/>
                                                    </td>
                                                    <td style="border-right:1pt solid grey;text-align:center;padding:3pt">
                                                        <span t-field="l.product_id.name"/>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <br/><br/><br/><br/><br/>
                                        <table style="solid grey;width:100%;color:black;"
                                               class="table">
                                            <thead>
                                                <tr>
                                                    <td width="15%"
                                                        style="text-align:right;padding:3pt;border-left: 0px;border-right: 0px;"
                                                        class="text-right"><span
                                                            t-esc="doc.amount_untaxed"
                                                            t-options='{"widget": "monetary", "display_currency": o.currency_id}'/></td>
                                                    <td width="35%" class="arabic"
                                                        style="text-align:right;padding:3pt;border-left: 0px;border-right: 0px;">
                                                        إجمالي المبلغ</td>
                                                    <td width="50%"
                                                        style="font-weight: bold;text-align:right;padding:3pt;border-left: 0px;border-right: 0px;">
                                                        Grand Total</td>
                                                </tr>
                                                <tr>
                                                    <td style="text-align:right;padding:3pt;border-left: 0px;border-right: 0px;"
                                                        class="text-right">
                                                        <span t-esc="tax_total"
                                                              t-options='{"widget": "monetary", "display_currency": o.currency_id}'/></td>
                                                    <td class="arabic"
                                                        style="text-align:right;padding:3pt;border-left: 0px;border-right: 0px;">
                                                        مجموع
                                                        ضريبة القيمة المضافة(15%)</td>
                                                    <td style="font-weight: bold;text-align:right;padding:3pt;border-left: 0px;border-right: 0px;">
                                                        VAT</td>
                                                </tr>
                                                <tr>
                                                    <td style="text-align:right;padding:3pt;border-left: 0px;border-right: 0px;"
                                                        class="text-right"><span
                                                            t-esc="doc.amount_total"
                                                            t-options='{"widget": "monetary", "display_currency": o.currency_id}'/></td>
                                                    <td class="arabic"
                                                        style="text-align:right;padding:3pt;border-left: 0px;border-right: 0px;">
                                                        الاجمالى شامل للضريبة</td>
                                                    <td style="font-weight: bold;text-align:right;padding:3pt;border-left: 0px;border-right: 0px;">
                                                        Total Taxable Amount
                                                        (Including VAT)</td>
                                                </tr>
                                                <tr>
                                                    <td style="text-align:right;padding:3pt;border-left: 0px;border-right: 0px;"
                                                        class="text-right"><span
                                                            t-esc="doc.amount_total-doc.amount_residual"
                                                            t-options='{"widget": "monetary", "display_currency": o.currency_id}'/></td>
                                                    <td class="arabic"
                                                        style="text-align:right;padding:3pt;border-left: 0px;border-right: 0px;">
                                                        مدفوع</td>
                                                    <td style="font-weight: bold;text-align:right;padding:3pt;border-left: 0px;border-right: 0px;">
                                                        Paid</td>
                                                </tr>
                                                <tr>
                                                    <td style="text-align:right;padding:3pt;border-left: 0px;border-right: 0px;"
                                                        class="text-right"><span
                                                            t-esc="doc.amount_residual"
                                                            t-options='{"widget": "monetary", "display_currency": o.currency_id}'/></td>
                                                    <td class="arabic"
                                                        style="text-align:right;padding:3pt;border-left: 0px;border-right: 0px;">
                                                        الرصيد
                                                        المستحق</td>
                                                    <td style="font-weight: bold;text-align:right;padding:3pt;border-left: 0px;border-right: 0px;">
                                                        Balance Due</td>
                                                </tr>
                                            </thead>
                                        </table>

                                    </div>
                                </div>
                            </t>
                        </div>
                    </t>
                </t>
            </t>
        </template>


    </data>
</odoo>